<!DOCTYPE html>
<html>
<head>
<title></title>
<meta charset="UTF-8">
<link rel="stylesheet" type="text/css" href="../Css/bootstrap.css" />
<link rel="stylesheet" type="text/css" href="../Css/bootstrap-responsive.css" />
<link rel="stylesheet" type="text/css" href="../Css/style.css" />
<script type="text/javascript" src="../Js/jquery.js"></script>
<script type="text/javascript" src="../Js/bootstrap.js"></script>
<script type="text/javascript" src="../Js/ckform.js"></script>
<script type="text/javascript" src="../Js/common.js"></script>
<style type="text/css">
body {
padding-bottom: 40px;
}
.sidebar-nav {
padding: 9px 0;
}
@media (max-width: 980px) {
/* Enable use of floated navbar text */
.navbar-text.pull-right {
float: none;
padding-left: 5px;
padding-right: 5px;
}
}
</style>
</head>
<body>
<form class="form-inline definewidth m20" action="index.html" method="get">
    菜单名称：
    <input type="text" name="menuname" id="menuname"class="abc input-default" placeholder="" value="">&nbsp;&nbsp;
    <button type="submit" class="btn btn-primary">查询</button>&nbsp;&nbsp;
	<button type="button" class="btn btn-success" id="addnew">新增角色</button>
</form>
<textarea style="display:none;" id="list_tpl">
    <thead>
    <tr>
        <th>英雄id</th>
        <th>简体名字</th>
        <th>繁体名字</th>
        <th>英文名字</th>
        <th>泰语名字</th>
        <th>印尼语名字</th>
		<th>越南语名字</th>
		<th>初始生命</th>
		<th>初始护甲系数</th>
		<th>初始魔抗系数</th>
		<th>初始攻击</th>
		<th>护甲穿透系数</th>
		<th>合成需要碎片数量</th>
		<th>英雄品质</th>
		<th>攻击类型</th>
		<th>特殊技能</th>
		<th>状态</th>
		<th>操作</th>
    </tr>
    </thead>
        <#<tr>
		    <td>{hid}</td>
			<td>{name_zh}</td>
			<td>{name_tw}</td>
			<td>{name_en}</td>
			<td>{name_th}</td>
			<td>{name_id}</td>
			<td>{name_vn}</td>
			<td>{init_blood}</td>
			<td>{init_parmor_m}</td>
			<td>{init_marmor_m}</td>
			<td>{init_attack}</td>
			<td>{init_cross}</td>
			<td>{fragment}</td>
			<td>{grade}</td>
			<td>{attack_t}</td>
			<td>{spe_skill}</td>
			<td>{status}</td>
			<td><a href="add.html#hid={hid}">编辑</a>&nbsp;&nbsp;&nbsp;<a href="javascript:delHero({hid});">删除</a></td>
		</tr>#>
</textarea>
<table class="table table-bordered table-hover definewidth m10" id="list">
</table>
</body>
</html>
<script>
    $(function () {
		$('#addnew').click(function(){
				window.location.href="add.html";
		 });
    });
	function showList( data )
	{
		for ( var i = 0, len = data.length; i < len; i++ )
		{
			switch ( data[i]['attack_t'] )
			{
				case '1': data[i]['attack_t'] = '物理攻击'; break;
				case '2': data[i]['attack_t'] = '魔法攻击'; break;
				case '3': data[i]['attack_t'] = '治愈'; break;
			}

			switch ( data[i]['spe_skill'] )
			{
				case '1': data[i]['spe_skill']  = '闪避'; break;
				case '2': data[i]['spe_skill']  = '格挡'; break;
				case '3': data[i]['spe_skill']  = '坚韧'; break;
				case '4': data[i]['spe_skill']  = '回血'; break;
				case '5': data[i]['spe_skill']  = '重生'; break;
				case '11': data[i]['spe_skill'] = '暴击'; break;
				case '12': data[i]['spe_skill'] = '必杀'; break;
				case '13': data[i]['spe_skill'] = '加深'; break;
				case '14': data[i]['spe_skill'] = '圣剑'; break;
				case '15': data[i]['spe_skill'] = '重击'; break;
			}

			switch ( data[i]['status'] )
			{
				case '0': data[i]['status'] = '禁用'; break;
				case '1': data[i]['status'] = '启用'; break;
			}
		}
		$e( 'list' ).innerHTML = dataTemplate( $e('list_tpl').value, data );
	}

	function delHero( hid )
	{
		loadJS( { "src":"/json.php?gate=hero_del&hid="+hid+"&cb=showResult"} );
	}

	function showResult( data )
	{
		alert( data['message'] );
		loadJS( { "src":"/json.php?gate=hero_list&cb=showList"} );
	}

	loadJS( { "src":"/json.php?gate=hero_list&cb=showList"} );
</script>